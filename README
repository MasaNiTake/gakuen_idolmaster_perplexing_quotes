# 初星学園　非公式　迷言集
ゲーム、学園アイドルマスターのキャラクターたちが発言した迷言を集めたサイトのコードとそれらを構成するアセットを生成するプログラムのコードをまとめたリポジトリです。
サイトを構築するコード、迷言を整理するコード、画像の加工を行うコードに分かれています。
新しい迷言を追加したい場合は、こちら[新しい迷言の追加](https://github.com/WhiteTiger-21/gakuen_idolmaster_perplexing_quotes/issues/1)にsub-issueを立ててください。

## 迷言の整理
カテゴリ、サブカテゴリ、イベントネーム、コミュのアイドル、要素、エピソード、発言者、迷言、備考(category, sub_category, event_name, commu_idol_name, affinity, episode, idol_name, quote, note)から成り立っています。
これらをdata.sqlに記載しています。
迷言を追加する場合は、こちらに記載してください。
迷言を追加した後、迷言の整理を行うコードを実行してください。
迷言を整理するプログラムは以下の構造で成り立っています。
SQLから迷言を取得する -> 迷言から画像パスを生成する -> 迷言をjsonに変換する

## 画像の加工
画像はinput_imgに720x1280のサイズで保存してください。
加工された画像はoutput_imgに保存されます。
画像は枠を切り取り、50kb以下のavif形式に変換されます。
画像の加工を行うプログラムは以下の構造で成り立っています。
input_imgディレクトリ内のすべての画像に対してトリミング処理を実行する -> トリミングされた画像をavif形式に変換する -> 50kb以上なら、さらに圧縮率を高めて変換を行う -> output_imgに保存する